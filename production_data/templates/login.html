<!-- templates/login.html -->
<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Đăng nhập</title>

  <style>
    /* Reset nhẹ */
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Inter, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, #f5f7fb 0%, #e9eef7 100%);
      color: #1f2937;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
    }

    /* Card */
    .login-card {
      width: 100%;
      max-width: 420px;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(16,24,40,0.08);
      padding: 24px;
      border: 1px solid rgba(15,23,42,0.03);
    }

    .login-title {
      margin: 0 0 12px 0;
      font-size: 1.125rem;
      font-weight: 600;
      color: #111827;
    }

    .login-sub {
      font-size: 0.9rem;
      color: #6b7280;
      margin-bottom: 18px;
    }

    /* Form */
    form.login-form { display: grid; gap: 12px; }

    label {
      display: block;
      font-size: 0.82rem;
      color: #374151;
      margin-bottom: 6px;
    }

    input[type="text"],
    input[type="password"],
    input[type="email"],
    input[type="date"] {
      width: 100%;
      padding: 10px 12px;
      border-radius: 8px;
      border: 1px solid #e6e9ef;
      background: #fff;
      font-size: 0.95rem;
      color: #0f172a;
      outline: none;
      transition: box-shadow .12s, border-color .12s, transform .06s;
    }
    input:focus {
      border-color: #6366f1;
      box-shadow: 0 6px 18px rgba(99,102,241,0.14);
      transform: translateY(-1px);
    }

    .form-row {
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .form-row .half { flex: 1; }

    .checkbox-row {
      display:flex;
      align-items:center;
      gap:8px;
      font-size:0.9rem;
      color:#4b5563;
    }

    .btn {
      display:inline-block;
      width:100%;
      padding: 10px 12px;
      background: #4f46e5;
      color: #fff;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.95rem;
      transition: transform .06s, box-shadow .08s, background .12s;
    }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 8px 20px rgba(79,70,229,0.12); }
    .btn.secondary {
      background: #eef2ff;
      color: #3730a3;
      font-weight:600;
    }

    .help-row {
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      font-size:0.87rem;
      color:#6b7280;
      margin-top:2px;
    }

    .errorlist, .form-error {
      color: #b91c1c;
      font-size: 0.85rem;
      margin: 4px 0 0 0;
      list-style:none;
      padding-left:0;
    }

    .form-footer {
      margin-top: 6px;
      display:flex;
      gap:8px;
      align-items:center;
      justify-content:space-between;
      font-size:0.87rem;
    }

    /* small helpers */
    .muted { color:#6b7280; font-size:0.85rem; }
    .show-pass { background:none; border:none; color:#374151; cursor:pointer; font-size:0.9rem; padding:6px; }

    @media (max-width:420px){
      .login-card { padding: 16px; border-radius:10px; }
      .login-title { font-size:1rem; }
    }
  </style>
</head>
<body>
  <main class="login-card" role="main" aria-labelledby="login-heading">
    <h1 id="login-heading" class="login-title">Đăng nhập hệ thống</h1>
    <p class="login-sub">Nhập tài khoản để tiếp tục</p>

    {% if form.non_field_errors %}
      <ul class="errorlist">
        {% for err in form.non_field_errors %}
          <li>{{ err }}</li>
        {% endfor %}
      </ul>
    {% endif %}

    <form method="post" class="login-form" novalidate>
      {% csrf_token %}

      {# Username #}
      <div>
        <label for="{{ form.username.id_for_label }}">Tài khoản</label>
        {{ form.username }}
        {% if form.username.errors %}
          <ul class="errorlist">
            {% for err in form.username.errors %}<li>{{ err }}</li>{% endfor %}
          </ul>
        {% endif %}
      </div>

      {# Password with toggle #}
      <div>
        <label for="{{ form.password.id_for_label }}">Mật khẩu</label>
        <div style="position:relative;">
          {{ form.password }}
          <button type="button" class="show-pass" id="togglePass" aria-label="Hiện mật khẩu" style="position:absolute; right:6px; top:50%; transform:translateY(-50%);">hiện</button>
        </div>
        {% if form.password.errors %}
          <ul class="errorlist">
            {% for err in form.password.errors %}<li>{{ err }}</li>{% endfor %}
          </ul>
        {% endif %}
      </div>

      <div class="form-row">
        <div class="checkbox-row">
          <input type="checkbox" name="remember" id="id_remember" style="width:16px;height:16px;">
          <label for="id_remember" style="margin:0;">Ghi nhớ đăng nhập</label>
        </div>
      </div>

      <button type="submit" class="btn">Đăng nhập</button>
        <div class="form-footer">
            <a href="#" class="muted">Quên mật khẩu?</a>
            <a href="{% url 'signup' %}" class="muted">Đăng ký tài khoản</a>
    </form>
  </main>

  <script>
    // focus và thêm chức năng show/hide password
    (function(){
      const username = document.querySelector('input[name="username"]');
      const password = document.querySelector('input[name="password"]');
      if(username) username.focus();

      const toggle = document.getElementById('togglePass');
      if(toggle && password){
        toggle.addEventListener('click', function(){
          if(password.type === 'password'){
            password.type = 'text';
            toggle.textContent = 'ẩn';
            toggle.setAttribute('aria-label','Ẩn mật khẩu');
          } else {
            password.type = 'password';
            toggle.textContent = 'hiện';
            toggle.setAttribute('aria-label','Hiện mật khẩu');
          }
        });
      }
    })();
  </script>
</body>
</html>
