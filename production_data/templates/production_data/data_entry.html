{% extends 'production_data/base.html' %}
{% block title %}Nhập liệu Sản xuất{% endblock %}

{% block content %}
<div class="card form-container">
    <h2 class="card-header">Nhập liệu Kết quả Sản xuất</h2>
    <form method="post" class="production-form">
        {% csrf_token %}

        <!-- Thông tin chung -->
        <fieldset class="form-section">
            <legend>Thông tin chung</legend>
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.date.id_for_label }}">Ngày:</label>
                    {{ form.date }}
                    {% if form.date.errors %}<ul class="errorlist">{{ form.date.errors }}</ul>{% endif %}
                </div>
            <div class="form-group">
                <label>Người nhập liệu:</label>
                <input type="text" value="{{ request.user.username }}" class="form-control" readonly>
            </div>
            </div>
        </fieldset>

        <!-- Máy loại -->
        <fieldset class="form-section">
            <legend>機種名 NAME OF TYPE</legend>
            <div class="form-group">
                <label for="{{ form.name_of_type.id_for_label }}">Mã Model:</label>
                {{ form.name_of_type }}
                {% if form.name_of_type.errors %}<ul class="errorlist">{{ form.name_of_type.errors }}</ul>{% endif %}
            </div>
        </fieldset>

        <!-- Kế hoạch & Thực tế -->
        <fieldset class="form-section">
            <legend>前日計画／実績 (Yesterday PLN/RSLT)</legend>
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.pc_plan.id_for_label }}">PC PLAN:</label>
                    {{ form.pc_plan }}
                    {% if form.pc_plan.errors %}<ul class="errorlist">{{ form.pc_plan.errors }}</ul>{% endif %}
                </div>
                <div class="form-group">
                    <label for="{{ form.pro_plan.id_for_label }}">PRO PLAN:</label>
                    {{ form.pro_plan }}
                    {% if form.pro_plan.errors %}<ul class="errorlist">{{ form.pro_plan.errors }}</ul>{% endif %}
                </div>
                <div class="form-group">
                    <label for="{{ form.result.id_for_label }}">RESULT:</label>
                    {{ form.result }}
                    {% if form.result.errors %}<ul class="errorlist">{{ form.result.errors }}</ul>{% endif %}
                </div>
                <div class="form-group">
                    <label for="{{ form.pc_diff.id_for_label }}">PC 差異:</label>
                    {{ form.pc_diff }}
                    {% if form.pc_diff.errors %}<ul class="errorlist">{{ form.pc_diff.errors }}</ul>{% endif %}
                </div>
                <div class="form-group">
                    <label for="{{ form.prod_diff.id_for_label }}">PROD 差異:</label>
                    {{ form.prod_diff }}
                    {% if form.prod_diff.errors %}<ul class="errorlist">{{ form.prod_diff.errors }}</ul>{% endif %}
                </div>
            </div>
        </fieldset>

        <!-- Giờ làm việc -->
        <fieldset class="form-section">
            <legend>Giờ làm việc</legend>
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.hour_pc_plan.id_for_label }}">HOUR PC PLAN:</label>
                    {{ form.hour_pc_plan }}
                    {% if form.hour_pc_plan.errors %}<ul class="errorlist">{{ form.hour_pc_plan.errors }}</ul>{% endif %}
                </div>
                <div class="form-group">
                    <label for="{{ form.hour_pro_plan.id_for_label }}">HOUR PRO PLAN:</label>
                    {{ form.hour_pro_plan }}
                    {% if form.hour_pro_plan.errors %}<ul class="errorlist">{{ form.hour_pro_plan.errors }}</ul>{% endif %}
                </div>
                <div class="form-group">
                    <label for="{{ form.hour_actual.id_for_label }}">HOUR (Actual):</label>
                    {{ form.hour_actual }}
                    {% if form.hour_actual.errors %}<ul class="errorlist">{{ form.hour_actual.errors }}</ul>{% endif %}
                </div>
                <div class="form-group">
                    <label for="{{ form.qty_hour.id_for_label }}">QTY/HOUR:</label>
                    {{ form.qty_hour }}
                    {% if form.qty_hour.errors %}<ul class="errorlist">{{ form.qty_hour.errors }}</ul>{% endif %}
                </div>
            </div>
        </fieldset>

        <!-- Lũy kế -->
        <fieldset class="form-section">
            <legend>累積数量 (ACC QTY.)</legend>
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.po_plan_ref.id_for_label }}">PC PLAN-REF 26 (Total):</label>
                    {{ form.po_plan_ref }}
                    {% if form.po_plan_ref.errors %}<ul class="errorlist">{{ form.po_plan_ref.errors }}</ul>{% endif %}
                </div>
                <div class="form-group">
                    <label for="{{ form.pc_plan_ref_2.id_for_label }}">PC PLAN REF 26:</label>
                    {{ form.pc_plan_ref_2 }}
                    {% if form.pc_plan_ref_2.errors %}<ul class="errorlist">{{ form.pc_plan_ref_2.errors }}</ul>{% endif %}
                </div>
                <div class="form-group">
                    <label for="{{ form.actuals.id_for_label }}">Kết quả (Actuals):</label>
                    {{ form.actuals }}
                    {% if form.actuals.errors %}<ul class="errorlist">{{ form.actuals.errors }}</ul>{% endif %}
                </div>
            </div>
        </fieldset>

        <!-- Input/Output -->
        <fieldset class="form-section">
            <legend>Input OUTPUT</legend>
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.input_material.id_for_label }}">INPUT:</label>
                    {{ form.input_material }}
                    {% if form.input_material.errors %}<ul class="errorlist">{{ form.input_material.errors }}</ul>{% endif %}
                </div>
                <div class="form-group">
                    <label for="{{ form.output.id_for_label }}">OUTPUT AFTER:</label>
                    {{ form.output }}
                    {% if form.output.errors %}<ul class="errorlist">{{ form.output.errors }}</ul>{% endif %}
                </div>
                <div class="form-group">
                    <label for="{{ form.output_before.id_for_label }}">OUTPUT Before:</label>
                    {{ form.output_before }}
                    {% if form.output_before.errors %}<ul class="errorlist">{{ form.output_before.errors }}</ul>{% endif %}
                </div>
                <div class="form-group">
                    <label for="{{ form.ng.id_for_label }}">NG:</label>
                    {{ form.ng }}
                    {% if form.ng.errors %}<ul class="errorlist">{{ form.ng.errors }}</ul>{% endif %}
                </div>
                <div class="form-group">
                    <label for="{{ form.input_actual.id_for_label }}">INPUT Thực tế:</label>
                    {{ form.input_actual }}
                    {% if form.input_actual.errors %}<ul class="errorlist">{{ form.input_actual.errors }}</ul>{% endif %}
                </div>
            </div>
        </fieldset>

        <!-- Số người -->
        <fieldset class="form-section">
            <legend>Số người 工数</legend>
            <div class="form-row">
                <div class="form-group">
                    <label for="{{ form.person_standard.id_for_label }}">Chuẩn Người:</label>
                    {{ form.person_standard }}
                    {% if form.person_standard.errors %}<ul class="errorlist">{{ form.person_standard.errors }}</ul>{% endif %}
                </div>
                <div class="form-group">
                    <label for="{{ form.person_actual.id_for_label }}">Thực tế:</label>
                    {{ form.person_actual }}
                    {% if form.person_actual.errors %}<ul class="errorlist">{{ form.person_actual.errors }}</ul>{% endif %}
                </div>
            </div>
        </fieldset>

        <!-- Nút -->
        <div class="button-group">
            <button type="submit" class="btn btn-primary">Lưu dữ liệu</button>
            {% if form.errors %}
            <div class="alert alert-danger">
                <ul>
                    {% for field, errors in form.errors.items %}
                        <li><strong>{{ field }}</strong>: {{ errors|join:", " }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            <button type="reset" class="btn btn-secondary">Hủy bỏ</button>
        </div>
    </form>
</div>
{% endblock %}